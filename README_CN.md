# 即梦 AIGC

一个强大的 Dify 插件，使用火山引擎豆包最新的 Seedream 和 Seedance 模型提供全面的 AI 图像和视频生成功能。支持文生图、文生视频、图生图、图生视频、多图融合等多种生成模式，具有专业级质量和灵活的配置选项。

## 版本信息

- **当前版本**: v0.0.1
- **发布日期**: 2026-02-13
- **兼容性**: Dify 插件框架
- **Python 版本**: 3.12

### 版本历史
- **v0.0.1** (2026-02-13): 初始版本，包含图像和视频生成功能

## 快速开始

1. 在您的 Dify 环境中安装插件
2. 配置火山引擎 API 凭证（API Key）
3. 开始使用 AI 生成图像和视频

## 核心特性
<img width="728" height="1412" alt="CN" src="https://github.com/user-attachments/assets/33b43f72-9960-4044-8f0b-efafc1fc7fbb"/><img width="732" height="1610" alt="EN" src="https://github.com/user-attachments/assets/6ced5493-dc55-4f35-9a47-bd23d93db18b"/>

- **多种生成模式**: 文生图、文生视频、图生图、图生视频、多图融合
- **最新 AI 模型**: 支持图像生成使用 Seedream 4.0、4.5、5.0 Lite；视频生成使用 Seedance 1.0 Pro、1.0 Pro Fast、1.5 Pro、2.0
- **灵活的图像尺寸**: 多种宽高比，从 1:1 到 21:9，分辨率高达 3024x1296
- **视频生成**: 创建最长 12 秒的视频，支持同步音频生成（Seedance 1.5 Pro）
- **多图支持**: 从多张参考图像生成图像（2-14 张）
- **首尾帧视频**: 从首帧和尾帧图像生成视频
- **批量生成**: 单次请求生成多张图像
- **样片模式**: 快速预览生成，加速迭代
- **水印控制**: 可选 AI 生成水印，确保内容真实性

## 核心功能

### 图像生成

#### 文生图 (text_2_image)
使用 Seedream 模型根据文本描述生成图像。
- **支持模型**: Seedream 4.0, Seedream 4.5, Seedream 5.0 Lite
- **功能特性**:
  - 多种宽高比（1:1、4:3、3:4、16:9、9:16、3:2、2:3、21:9）
  - 高分辨率，最高 3024x1296
  - 可选水印
  - 快速生成速度

#### 图生图 (image_2_image)
根据文本和参考图像生成图像。
- **支持模型**: Seedream 4.0, Seedream 4.5, Seedream 5.0 Lite
- **功能特性**:
  - 参考图像引导生成
  - 多种宽高比
  - 可选水印
  - 支持 jpeg、png、webp、bmp、tiff、gif 格式（最大 10MB）

#### 多图融合 (multi_images_2_image)
根据文本和多张参考图像生成一张图像（2-14 张）。
- **支持模型**: Seedream 4.0, Seedream 4.5, Seedream 5.0 Lite
- **功能特性**:
  - 最多组合 14 张参考图像
  - 智能图像融合
  - 多种宽高比
  - 可选水印

#### 多参考图生组图 (multi_images_2_multi_images)
根据文本和多张参考图像生成一组图像。
- **支持模型**: Seedream 4.0, Seedream 4.5, Seedream 5.0 Lite
- **功能特性**:
  - 每次请求生成 1-15 张图像
  - 支持多张参考图像（2-14 张）
  - 批量生成
  - 多种宽高比

### 视频生成

#### 文生视频 (text_2_video)
使用 Seedance 模型根据文本描述生成视频。
- **支持模型**: Seedance 1.0 Pro, Seedance 1.0 Pro Fast, Seedance 1.5 Pro, Seedance 2.0
- **功能特性**:
  - 时长：2-12 秒
  - 分辨率：480p、720p、1080p
  - 宽高比：16:9、4:3、1:1、3:4、9:16、21:9、自适应
  - 同步音频生成（Seedance 1.5 Pro）
  - 样片模式快速预览
  - 固定摄像头选项
  - 服务等级选择（default/flex）

#### 图生视频 (image_2_video)
根据单张图像和文本描述生成视频。
- **支持模型**: Seedance 1.0 Pro, Seedance 1.0 Pro Fast, Seedance 1.5 Pro, Seedance 2.0
- **功能特性**:
  - 单张图像输入
  - 时长：2-12 秒
  - 分辨率：480p、720p、1080p
  - 自适应宽高比支持
  - 同步音频生成
  - 提供样片模式

#### 首尾帧图生视频 (images_2_video)
根据首帧和尾帧图像生成视频。
- **支持模型**: Seedance 1.0 Pro, Seedance 1.5 Pro, Seedance 2.0
- **功能特性**:
  - 首帧和尾帧输入
  - 平滑过渡生成
  - 时长：2-12 秒
  - 分辨率：480p、720p、1080p
  - 同步音频生成
  - 提供样片模式

#### 视频结果查询 (video_query)
查询视频生成任务的状态和结果。
- **功能特性**:
  - 实时任务状态
  - 视频下载 URL 获取
  - 尾帧图像返回选项

## 技术优势

- **最新 AI 模型**: 访问豆包最新的 Seedream 和 Seedance 模型
- **高质量输出**: 专业级图像和视频生成
- **灵活配置**: 丰富的参数选项用于精细调整
- **异步处理**: 基于任务的高效视频生成工作流
- **多格式支持**: 支持各种图像和视频格式
- **音频生成**: 视频自动同步音频
- **批量处理**: 高效生成多张图像
- **样片模式**: 快速预览，加速迭代周期

## 系统要求

- Python 3.12
- Dify 平台访问权限
- 火山引擎 API 凭证（API Key）
- 所需的 Python 包（通过 requirements.txt 安装）:
  - dify_plugin>=0.2.0
  - requests>=2.31.0,<3.0.0
  - pillow>=10.0.0,<11.0.0

## 安装与配置

1. 安装所需的依赖项：
   ```bash
   pip install -r requirements.txt
   ```

2. 在插件设置中配置火山引擎 API 凭证：
   - **API Key**: 您的火山引擎 API 密钥

3. 在您的 Dify 环境中安装插件

## 使用方法

### 图像生成工具

#### 1. 文生图
根据文本描述生成图像。
- **参数**:
  - `prompt`: 图像的文本描述（必需）
  - `size`: 图像尺寸（默认：2048x2048）
  - `watermark`: 启用/禁用水印（默认：启用）
  - `model`: 模型版本（默认：Seedream 4.5）

#### 2. 图生图
根据文本和参考图像生成图像。
- **参数**:
  - `prompt`: 文本描述（必需）
  - `input_image_file`: 参考图像文件（必需）
  - `size`: 图像尺寸（默认：2048x2048）
  - `watermark`: 启用/禁用水印（默认：启用）
  - `model`: 模型版本（默认：Seedream 4.5）

#### 3. 多图融合
根据多张参考图像生成图像。
- **参数**:
  - `prompt`: 文本描述（必需）
  - `input_image_files`: 参考图像（2-14 张，必需）
  - `size`: 图像尺寸（默认：2048x2048）
  - `watermark`: 启用/禁用水印（默认：启用）
  - `model`: 模型版本（默认：Seedream 4.5）

#### 4. 多参考图生组图
根据参考图像生成多张图像。
- **参数**:
  - `prompt`: 文本描述（必需）
  - `input_image_files`: 参考图像（2-14 张，必需）
  - `max_images`: 最大生成图像数量（1-15，默认：3）
  - `size`: 图像尺寸（默认：2048x2048）
  - `watermark`: 启用/禁用水印（默认：启用）
  - `model`: 模型版本（默认：Seedream 4.5）

### 视频生成工具

#### 5. 文生视频
根据文本描述生成视频。
- **参数**:
  - `prompt`: 文本描述（最多 500 字，必需）
  - `model`: 模型版本（默认：Seedance 1.5 Pro）
  - `resolution`: 视频分辨率（默认：720p）
  - `ratio`: 宽高比（默认：16:9）
  - `duration`: 时长（秒）（2-12，默认：5）
  - `seed`: 随机种子（-1 为随机）
  - `camera_fixed`: 固定摄像头位置
  - `watermark`: 启用/禁用水印
  - `generate_audio`: 生成同步音频
  - `draft`: 样片模式快速预览
  - `return_last_frame`: 查询结果返回尾帧图像
  - `service_tier`: 服务等级（default/flex）

#### 6. 图生视频
根据单张图像生成视频。
- **参数**:
  - `prompt`: 文本描述（必需）
  - `input_image_file`: 输入图像（必需）
  - 其他参数同文生视频

#### 7. 首尾帧图生视频
根据首帧和尾帧图像生成视频。
- **参数**:
  - `prompt`: 文本描述（必需）
  - `first_frame_file`: 首帧图像（必需）
  - `last_frame_file`: 尾帧图像（必需）
  - 其他参数同文生视频

#### 8. 视频结果查询
查询视频生成任务状态。
- **参数**:
  - `task_id`: 视频生成任务 ID（必需）
  - `download_video`: 当视频可用时下载视频文件（默认：启用）

## 支持的图像尺寸

| 宽高比 | 分辨率 |
|-------|--------|
| 1:1 | 2048x2048 |
| 4:3 | 2304x1728 |
| 3:4 | 1728x2304 |
| 16:9 | 2560x1440 |
| 9:16 | 1440x2560 |
| 3:2 | 2496x1664 |
| 2:3 | 1664x2496 |
| 21:9 | 3024x1296 |

## 注意事项

- 视频生成是异步的，使用视频查询工具检查状态并获取结果
- Seedance 1.5 Pro 支持同步音频生成
- 样片模式提供更快的生成速度，适合快速预览
- Flex 服务等级提供更具成本效益的处理，但等待时间更长
- 视频生成的最大提示词长度为 500 字
- 参考图像大小应在 10MB 以内
- 多图融合支持 2-14 张参考图像

## 开发者信息

- **作者**: `https://github.com/sawyer-shi`
- **邮箱**: sawyer36@foxmail.com
- **许可证**: Apache License 2.0
- **源代码**: `https://github.com/sawyer-shi/dify-plugins-seedream_aigc`
- **支持**: 通过 Dify 平台和 GitHub Issues 提供

## 许可证声明

本项目采用 Apache License 2.0 许可证。完整的许可证文本请参阅 [LICENSE](LICENSE) 文件。

---

**准备好使用 AI 创建精美的图像和视频了吗？**
